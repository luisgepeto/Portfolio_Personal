<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/styles.c5ebb5ada8f9b6f35476.css" id="gatsby-global-css">code[class*=language-],pre[class*=language-]{color:#c5c8c6;text-shadow:0 1px rgba(0,0,0,.3);font-family:Inconsolata,Monaco,Consolas,Courier New,Courier,monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto;border-radius:.3em}:not(pre)>code[class*=language-],pre[class*=language-]{background:#1d1f21}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#7c7c7c}.token.punctuation{color:#c5c8c6}.namespace{opacity:.7}.token.keyword,.token.property,.token.tag{color:#96cbfe}.token.class-name{color:#ffffb6;text-decoration:underline}.token.boolean,.token.constant{color:#9c9}.token.deleted,.token.symbol{color:#f92672}.token.number{color:#ff73fd}.token.attr-name,.token.builtin,.token.char,.token.inserted,.token.selector,.token.string{color:#a8ff60}.token.variable{color:#c6c5fe}.token.operator{color:#ededed}.token.entity{color:#ffffb6;cursor:help}.token.url{color:#96cbfe}.language-css .token.string,.style .token.string{color:#87c38a}.token.atrule,.token.attr-value{color:#f9ee98}.token.function{color:#dad085}.token.regex{color:#e9c062}.token.important{color:#fd971f}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}pre[class*=language-].line-numbers{position:relative;padding-left:3.8em;counter-reset:linenumber}pre[class*=language-].line-numbers>code{position:relative;white-space:inherit}.line-numbers .line-numbers-rows{position:absolute;pointer-events:none;top:0;font-size:100%;left:-3.8em;width:3em;letter-spacing:-1px;border-right:1px solid #999;-webkit-user-select:none;-ms-user-select:none;user-select:none}.line-numbers-rows>span{display:block;counter-increment:linenumber}.line-numbers-rows>span:before{content:counter(linenumber);color:#999;display:block;padding-right:.8em;text-align:right}@font-face{font-family:Nunito;font-style:normal;font-display:swap;font-weight:200;src:local("Nunito Extra Light "),local("Nunito-Extra Light"),url(/static/nunito-latin-200-2dbeb8d854e77c952cb636cb14a151c4.woff2) format("woff2"),url(/static/nunito-latin-200-e53a21a8bf1b97fb9900e8d5c5bfbc14.woff) format("woff")}@font-face{font-family:Nunito;font-style:italic;font-display:swap;font-weight:200;src:local("Nunito Extra Light italic"),local("Nunito-Extra Lightitalic"),url(/static/nunito-latin-200italic-bbdf1c37c56e1bfaf618b9a4ee46d508.woff2) format("woff2"),url(/static/nunito-latin-200italic-2bcb70df023a72cb0a5864c993d03bfc.woff) format("woff")}@font-face{font-family:Nunito;font-style:normal;font-display:swap;font-weight:300;src:local("Nunito Light "),local("Nunito-Light"),url(/static/nunito-latin-300-98aabf9aea1a55e2390109ad1efddce3.woff2) format("woff2"),url(/static/nunito-latin-300-97e0d2fc0422400a6e7be8f1b5e4949e.woff) format("woff")}@font-face{font-family:Nunito;font-style:italic;font-display:swap;font-weight:300;src:local("Nunito Light italic"),local("Nunito-Lightitalic"),url(/static/nunito-latin-300italic-ac71e7f9cd408dd512f6a6bbbd64eb51.woff2) format("woff2"),url(/static/nunito-latin-300italic-8646bd832f738c016b56b146af6fcd46.woff) format("woff")}@font-face{font-family:Nunito;font-style:normal;font-display:swap;font-weight:400;src:local("Nunito Regular "),local("Nunito-Regular"),url(/static/nunito-latin-400-508e414e3d3bc41666826fee46c7d881.woff2) format("woff2"),url(/static/nunito-latin-400-e5875b853d135f2a82ceae7ac537b6f4.woff) format("woff")}@font-face{font-family:Nunito;font-style:italic;font-display:swap;font-weight:400;src:local("Nunito Regular italic"),local("Nunito-Regularitalic"),url(/static/nunito-latin-400italic-28f555d9a5c83842f03988ed14f00ef5.woff2) format("woff2"),url(/static/nunito-latin-400italic-09ce3100c075ee04f293b9191c88f156.woff) format("woff")}@font-face{font-family:Nunito;font-style:normal;font-display:swap;font-weight:600;src:local("Nunito SemiBold "),local("Nunito-SemiBold"),url(/static/nunito-latin-600-8b8871e482a76d7e9327b02131564af7.woff2) format("woff2"),url(/static/nunito-latin-600-f894e279899f0cda9d06e32b78783399.woff) format("woff")}@font-face{font-family:Nunito;font-style:italic;font-display:swap;font-weight:600;src:local("Nunito SemiBold italic"),local("Nunito-SemiBolditalic"),url(/static/nunito-latin-600italic-9f930640316b0b9e8b088958d8f7aa5c.woff2) format("woff2"),url(/static/nunito-latin-600italic-9d150271cf30aefb8609dff4c9ece978.woff) format("woff")}@font-face{font-family:Nunito;font-style:normal;font-display:swap;font-weight:700;src:local("Nunito Bold "),local("Nunito-Bold"),url(/static/nunito-latin-700-a22acb48f45d03d672bf5b9389363a83.woff2) format("woff2"),url(/static/nunito-latin-700-7d90308f9bdf7321be5e28d017a5ade5.woff) format("woff")}@font-face{font-family:Nunito;font-style:italic;font-display:swap;font-weight:700;src:local("Nunito Bold italic"),local("Nunito-Bolditalic"),url(/static/nunito-latin-700italic-4507a1361620a66827e217855c9fff24.woff2) format("woff2"),url(/static/nunito-latin-700italic-26556875512fee1b823bc6117c076358.woff) format("woff")}@font-face{font-family:Nunito;font-style:normal;font-display:swap;font-weight:800;src:local("Nunito ExtraBold "),local("Nunito-ExtraBold"),url(/static/nunito-latin-800-eaa946756e91563b4b7d766de2f5b7ed.woff2) format("woff2"),url(/static/nunito-latin-800-5fa815a069b40c78f26863eaabcd6d2f.woff) format("woff")}@font-face{font-family:Nunito;font-style:italic;font-display:swap;font-weight:800;src:local("Nunito ExtraBold italic"),local("Nunito-ExtraBolditalic"),url(/static/nunito-latin-800italic-b9cd56a25c86d089cc18bc92dbad167a.woff2) format("woff2"),url(/static/nunito-latin-800italic-2e1a4979ec23066532d157ab5fe4ccc5.woff) format("woff")}@font-face{font-family:Nunito;font-style:normal;font-display:swap;font-weight:900;src:local("Nunito Black "),local("Nunito-Black"),url(/static/nunito-latin-900-f82c6fb49774f4e4caa570640e164320.woff2) format("woff2"),url(/static/nunito-latin-900-19de37363cebfe020de6d4abdbb38c2e.woff) format("woff")}@font-face{font-family:Nunito;font-style:italic;font-display:swap;font-weight:900;src:local("Nunito Black italic"),local("Nunito-Blackitalic"),url(/static/nunito-latin-900italic-6f10930c04eec040ac4ffb4890191149.woff2) format("woff2"),url(/static/nunito-latin-900italic-ca56cb53793f0f9084f26315012cefd8.woff) format("woff")}code{background-color:rgba(0,0,0,.04)}body{margin:0;font-family:Verdana,Helvetica,"sans-serif";-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}article,aside,details,figcaption,figure,footer,header,main,menu,nav,section,summary{display:block}audio,canvas,progress,video{display:inline-block}audio:not([controls]){display:none;height:0}progress{vertical-align:baseline}[hidden],template{display:none}a{font-style:normal;color:rgba(0,0,0,.8);-webkit-text-decoration-skip:objects}a:active,a:hover{outline-width:0}abbr[title]{border-bottom:none;text-decoration:underline;-webkit-text-decoration:underline dotted;text-decoration:underline dotted}b,strong{font-weight:inherit;font-weight:bolder}dfn{font-style:italic}h1{font-size:2em;margin:.67em 0}mark{background-color:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}svg:not(:root){overflow:hidden}code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em}figure{margin:1em 40px}hr{box-sizing:content-box;height:0;overflow:visible}button,input,optgroup,select,textarea{font:inherit;margin:0}optgroup{font-weight:700}button,input{overflow:visible}button,select{text-transform:none}[type=reset],[type=submit],button,html [type=button]{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-cancel-button,[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-input-placeholder{color:inherit;opacity:.54}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}html{font:112.5%/1.45em georgia,serif;box-sizing:border-box;overflow-y:scroll}*,:after,:before{box-sizing:inherit}body{color:rgba(0,0,0,.8);font-weight:400;word-wrap:break-word;font-kerning:normal;-ms-font-feature-settings:"kern","liga","clig","calt";font-feature-settings:"kern","liga","clig","calt"}img{max-width:100%;padding:0;margin:0 0 1.45rem}h1{font-size:2.25rem}h1,h2{padding:0;margin:0 0 1.45rem;color:inherit;font-weight:700;text-rendering:optimizeLegibility;line-height:1.1}h2{font-size:1.62671rem}h3{font-size:1.38316rem}h3,h4{padding:0;margin:0 0 1.45rem;color:inherit;font-weight:700;text-rendering:optimizeLegibility;line-height:1.1}h4{font-size:1rem}h5{font-size:.85028rem}h5,h6{padding:0;margin:0 0 1.45rem;color:inherit;font-weight:700;text-rendering:optimizeLegibility;line-height:1.1}h6{font-size:.78405rem}hgroup{padding:0;margin:0 0 1.45rem}ol,ul{padding:0;margin:0 0 1.45rem 1.45rem;list-style-position:outside;list-style-image:none}dd,dl,figure,p{padding:0;margin:0 0 1.45rem}pre{margin:0 0 1.45rem;font-size:.8rem;line-height:1.42;background:rgba(0,0,0,.04);border-radius:3px;overflow:auto;word-wrap:normal;padding:1.45rem}table{font-size:1rem;line-height:1.45rem;border-collapse:collapse;width:100%}fieldset,table{padding:0;margin:0 0 1.45rem}blockquote{padding:0;margin:0 1.45rem 1.45rem}form,iframe,noscript{padding:0;margin:0 0 1.45rem}hr{padding:0;margin:0 0 calc(1.45rem - 1px);background:rgba(0,0,0,.2);border:none;height:1px}address{padding:0;margin:0 0 1.45rem}b,dt,strong,th{font-weight:700}li{margin-bottom:.725rem}ol li,ul li{padding-left:0}li>ol,li>ul{margin-left:1.45rem;margin-bottom:.725rem;margin-top:.725rem}blockquote :last-child,li :last-child,p :last-child{margin-bottom:0}li>p{margin-bottom:.725rem}code,kbd,samp{font-size:.8rem;line-height:1.45rem}abbr,abbr[title],acronym{border-bottom:1px dotted rgba(0,0,0,.5);cursor:help}abbr[title]{text-decoration:none}td,th,thead{text-align:left}td,th{border-bottom:1px solid rgba(0,0,0,.12);font-feature-settings:"tnum";-moz-font-feature-settings:"tnum";-ms-font-feature-settings:"tnum";-webkit-font-feature-settings:"tnum";padding:.725rem .96667rem calc(.725rem - 1px)}td:first-child,th:first-child{padding-left:0}td:last-child,th:last-child{padding-right:0}code,tt{background-color:rgba(0,0,0,.04);border-radius:3px;font-family:SFMono-Regular,Consolas,Roboto Mono,Droid Sans Mono,Liberation Mono,Menlo,Courier,monospace;padding:.2em 0}pre code{background:none;line-height:1.42}code:after,code:before,tt:after,tt:before{letter-spacing:-.2em;content:" "}pre code:after,pre code:before,pre tt:after,pre tt:before{content:""}.gatsby-highlight{background-color:#1d1f21;border-radius:.3em;margin:.5em 0;padding:1em;overflow:auto}.gatsby-highlight pre[class*=language-].line-numbers{padding:0 0 0 2.8em;overflow:initial}@media only screen and (max-width:480px){html{font-size:100%}}</style><meta name="generator" content="Gatsby 2.32.13"/><title data-react-helmet="true">Docker: supercharge your CI pipeline | Luis Becerril</title><meta data-react-helmet="true" name="description" content="Whenever we hear that a project uses Docker, automatically the microservices architecture comes into mind. However Docker is not only useful among the…"/><meta data-react-helmet="true" property="og:title" content="Docker: supercharge your CI pipeline"/><meta data-react-helmet="true" property="og:description" content="Whenever we hear that a project uses Docker, automatically the microservices architecture comes into mind. However Docker is not only useful among the…"/><meta data-react-helmet="true" property="og:type" content="website"/><link rel="icon" href="/favicon-32x32.png?v=cf477734ab84c76ba024047fbb885545" type="image/png"/><link rel="manifest" href="/manifest.webmanifest" crossorigin="anonymous"/><meta name="theme-color" content="#126F72"/><link rel="apple-touch-icon" sizes="48x48" href="/icons/icon-48x48.png?v=cf477734ab84c76ba024047fbb885545"/><link rel="apple-touch-icon" sizes="72x72" href="/icons/icon-72x72.png?v=cf477734ab84c76ba024047fbb885545"/><link rel="apple-touch-icon" sizes="96x96" href="/icons/icon-96x96.png?v=cf477734ab84c76ba024047fbb885545"/><link rel="apple-touch-icon" sizes="144x144" href="/icons/icon-144x144.png?v=cf477734ab84c76ba024047fbb885545"/><link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192x192.png?v=cf477734ab84c76ba024047fbb885545"/><link rel="apple-touch-icon" sizes="256x256" href="/icons/icon-256x256.png?v=cf477734ab84c76ba024047fbb885545"/><link rel="apple-touch-icon" sizes="384x384" href="/icons/icon-384x384.png?v=cf477734ab84c76ba024047fbb885545"/><link rel="apple-touch-icon" sizes="512x512" href="/icons/icon-512x512.png?v=cf477734ab84c76ba024047fbb885545"/><link as="script" rel="preload" href="/app-584f2fd746a75deb887d.js"/><link as="script" rel="preload" href="/component---src-templates-blog-post-js-ef27a760d5c6c8a9ee6d.js"/><link as="script" rel="preload" href="/commons-61fda48d05e98b595736.js"/><link as="script" rel="preload" href="/styles-e9d24b1846c7d6eb9685.js"/><link as="script" rel="preload" href="/framework-8e528b732ab2eaadb7b7.js"/><link as="script" rel="preload" href="/webpack-runtime-f53e3220823d64be0602.js"/><link as="fetch" rel="preload" href="/page-data/blog/docker-supercharge-continous-integration/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/3000541721.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/3649515864.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/app-data.json" crossorigin="anonymous"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><style data-emotion-css="1pyi7sa">.css-1pyi7sa{background:transparent;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-content:center;-ms-flex-line-pack:center;align-content:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;}</style><header class="css-1pyi7sa ey4lpck4"><style data-emotion-css="k1grrt">.css-k1grrt{max-width:860px;padding:1rem 1.0875rem;font-size:1.2rem;}</style><div class="css-k1grrt ey4lpck0"><p><style data-emotion-css="1kljdew">.css-1kljdew{color:black;margin-left:15px;-webkit-text-decoration:none;text-decoration:none;display:inline-block;position:relative;margin-left:0;}.css-1kljdew::after{content:"";position:absolute;width:100%;-webkit-transform:scaleX(0);-ms-transform:scaleX(0);transform:scaleX(0);height:2px;bottom:0;left:0;background-color:rgba(0,0,0,0.8);-webkit-transform-origin:bottom right;-ms-transform-origin:bottom right;transform-origin:bottom right;-webkit-transition:-webkit-transform 0.4s cubic-bezier(0.86,0,0.07,1);-webkit-transition:transform 0.4s cubic-bezier(0.86,0,0.07,1);transition:transform 0.4s cubic-bezier(0.86,0,0.07,1);}.css-1kljdew:hover::after{-webkit-transform:scaleX(1);-ms-transform:scaleX(1);transform:scaleX(1);-webkit-transform-origin:bottom left;-ms-transform-origin:bottom left;transform-origin:bottom left;}</style><a class="css-1kljdew ey4lpck3" href="/">Home</a><style data-emotion-css="1wj6arw">.css-1wj6arw{color:black;margin-left:15px;-webkit-text-decoration:none;text-decoration:none;display:inline-block;position:relative;}.css-1wj6arw::after{content:"";position:absolute;width:100%;-webkit-transform:scaleX(0);-ms-transform:scaleX(0);transform:scaleX(0);height:2px;bottom:0;left:0;background-color:rgba(0,0,0,0.8);-webkit-transform-origin:bottom right;-ms-transform-origin:bottom right;transform-origin:bottom right;-webkit-transition:-webkit-transform 0.4s cubic-bezier(0.86,0,0.07,1);-webkit-transition:transform 0.4s cubic-bezier(0.86,0,0.07,1);transition:transform 0.4s cubic-bezier(0.86,0,0.07,1);}.css-1wj6arw:hover::after{-webkit-transform:scaleX(1);-ms-transform:scaleX(1);transform:scaleX(1);-webkit-transform-origin:bottom left;-ms-transform-origin:bottom left;transform-origin:bottom left;}</style><a class="css-1wj6arw ey4lpck1" href="/blog">Blog</a><a href="https://www.linkedin.com/in/luis-becerril-09b26789" class="css-1wj6arw ey4lpck2">LinkedIn</a><a href="https://github.com/luisgepeto/" class="css-1wj6arw ey4lpck2">GitHub</a></p></div></header><style data-emotion-css="1813l62">.css-1813l62{margin:0 auto;max-width:860px;padding:0 1.0875rem 1rem;padding-top:0;}</style><div class="css-1813l62 e1gf3uqo0"><main><style data-emotion-css="hu0znc">.css-hu0znc{margin:0 auto;max-width:860px;padding:1.45rem 1.0875rem;}</style><div class="css-hu0znc eacr390"><style data-emotion-css="zj7ym0">.css-zj7ym0{display:inline;border-radius:1em 0 1em 0;background-image:linear-gradient( -100deg,rgba(18,111,114,0.15),rgba(18,111,114,0.8) 100%,rgba(18,111,114,0.25) );}</style><h1 class="css-zj7ym0 eacr391">Docker: supercharge your CI pipeline</h1><style data-emotion-css="wvcn4j">.css-wvcn4j{margin-top:10px;color:#606060;}</style><h3 class="css-wvcn4j eacr392">02 June, 2021<!-- --> - <!-- -->5 min read</h3><style data-emotion-css="34z1nk">.css-34z1nk a{-webkit-text-decoration:none;text-decoration:none;position:relative;}.css-34z1nk a::after{content:"";position:absolute;z-index:-1;top:70%;left:-0.1px;right:-0.1px;bottom:0;-webkit-transition:top 0.1s ease-in-out;transition:top 0.1s ease-in-out;background-color:rgba(18,111,114,0.8);}.css-34z1nk a:hover::after{top:0;}</style><div class="css-34z1nk eacr393"><p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; "
    >
      <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 41%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAABJ0AAASdAHeZh94AAABxklEQVQoz12RT2sTURTF5xPo1k1BUHHvyoUfwE03pSAIushScKuuXIjipqVFC+pCV0qRWqPUURMbKUzaKTXYsQlkklhJUmqmkyZpEtNJ59/PmTdTrV5475377n3nnvuu5Ps+XrBCa3X7zKQUKg1T+PiuOFzPi/0ob3/9C1ZhXWCruMEgp0Zhz0Xy4yRFy3Ph3iNO3pxgdknF6PS4rZQwgiKh7bZa2MOhwN0Ht2jfuYaza9K5e53u9I24fkAYgsV8mTOT84xMvubsVJJzD98wPqcy9jzDptHEORiSSCSQZTlSnBzDunqM2vlT7F85jjc/ipAVbIIwrRU5PSMz8iSDNL2IdF/m4tMUg3YT4naz2Sw7hiGw9+s79uxlWqMnsF9cwuuXBWHYrURstXqdZ6t5xl8u83i5EJX7b+cf7OBqbwO51t9IqLC9t0fyY5rsWg69qLNZ0lFXVsh9y6MEd4bZjJ670YAawRfUaluUKlXM3gG9/gC9VKHd6Yq4VN3aZiGdIbWksPDpM+pXjVfvU8y9+yDurHgQXtx6wzADsh9sFHSq1TrlAK+uaWz/3IkID5MPp23bTizfP9KK/8cPTzdWazuOWEff/wY5CDq0EapQGwAAAABJRU5ErkJggg=='); background-size: cover; display: block;"
  ></span>
  <picture>
          <source
              srcset="/static/b509ffce673c9084f398a745a190a42a/ba381/docker-gitlab-logo.webp 200w,
/static/b509ffce673c9084f398a745a190a42a/7f61c/docker-gitlab-logo.webp 400w,
/static/b509ffce673c9084f398a745a190a42a/d00b9/docker-gitlab-logo.webp 800w,
/static/b509ffce673c9084f398a745a190a42a/92f8c/docker-gitlab-logo.webp 1200w,
/static/b509ffce673c9084f398a745a190a42a/c6231/docker-gitlab-logo.webp 1572w"
              sizes="(max-width: 800px) 100vw, 800px"
              type="image/webp"
            />
          <source
            srcset="/static/b509ffce673c9084f398a745a190a42a/772e8/docker-gitlab-logo.png 200w,
/static/b509ffce673c9084f398a745a190a42a/e17e5/docker-gitlab-logo.png 400w,
/static/b509ffce673c9084f398a745a190a42a/5a190/docker-gitlab-logo.png 800w,
/static/b509ffce673c9084f398a745a190a42a/c1b63/docker-gitlab-logo.png 1200w,
/static/b509ffce673c9084f398a745a190a42a/5df5d/docker-gitlab-logo.png 1572w"
            sizes="(max-width: 800px) 100vw, 800px"
            type="image/png"
          />
          <img
            class="gatsby-resp-image-image"
            src="/static/b509ffce673c9084f398a745a190a42a/5a190/docker-gitlab-logo.png"
            alt="Docker and GitLab logos"
            title="Docker and GitLab logos"
            loading="lazy"
            style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
          />
        </picture>
    </span></p>
<p>Whenever we hear that a project uses Docker, automatically the microservices architecture comes into mind. However Docker is not only useful among the microservices paradigm. Many of the leading Git platforms rely on Docker images for their CI (Continous Integration) pipelines. Over this post we will focus on GitLab (although other providers such as GitHub or Bitbucket follow similar concepts) to explain how Docker can help us to supercharge our CI, including the creation of custom images to include even the most complex project requirement.</p>
<h1>The basics</h1>
<h2>GitLab pipelines 101</h2>
<p>The easiest way to understand pipelines in GitLab is to imagine a series of orderly applied transformations that are performed against a clean copy of your repository. Each of these steps is called a <em>stage</em>. Each stage can contain multiple operations which usually occur in parallel. These operations are called <em>jobs</em>. The <em>stages</em> are then defined inside a custom <code class="language-text">gitlab-ci.yml</code> file which lives at the root of your repository. Here is a sample file with basic configuration:</p>
<div class="gatsby-highlight" data-language="yml"><pre style="counter-reset: linenumber NaN" class="language-yml line-numbers"><code class="language-yml"><span class="token key atrule">default</span><span class="token punctuation">:</span>
  <span class="token key atrule">image</span><span class="token punctuation">:</span> mcr.microsoft.com/dotnet/core/sdk<span class="token punctuation">:</span>latest

<span class="token key atrule">stages</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> build<span class="token punctuation">-</span>stage
  <span class="token punctuation">-</span> test<span class="token punctuation">-</span>stage

<span class="token key atrule">build-job</span><span class="token punctuation">:</span>
  <span class="token key atrule">stage</span><span class="token punctuation">:</span> build<span class="token punctuation">-</span>stage
  <span class="token key atrule">script</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> dotnet build
    
<span class="token key atrule">test-job</span><span class="token punctuation">:</span>
  <span class="token key atrule">stage</span><span class="token punctuation">:</span> test<span class="token punctuation">-</span>stage
  <span class="token key atrule">script</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> dotnet test</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<p>Of course there are a lot of ways that we can customize <em>jobs</em> and <em>stages</em> such as conditional execution or artifact creation, however this will be the topic for another post. </p>
<h2>Docker + GitLab</h2>
<p>Now, you may wonder, where does Docker come into play? Well, every time that a new <em>job</em> is started and a fresh copy of the repository is created, it is started inside a running container of a base Docker image defined in your <code class="language-text">gitlab-ci.yml</code>. Did you see the first <code class="language-text">image:</code> declaration in the <code class="language-text">.yml</code> file? Well that will be our default Docker image that will be used to start each of our jobs. That is the reason why inside our <code class="language-text">script</code> component we can use the <code class="language-text">dotnet</code> CLI. </p>
<h1>Start supercharging your CI</h1>
<h2>Use different Docker images between jobs</h2>
<p>Let's say that your project consists in a backend written in .NET, while you have a SPA written in React, and that both projects are inside the same repository. You will need to compile both as part of your CI pipeline, however one depends in the <code class="language-text">dotnet</code> CLI, while for the other you need <code class="language-text">npm</code>. This might not be very easy if the same <code class="language-text">mcr.microsoft.com/dotnet/core/sdk:latest</code> image is used for both scenarios. Therefore you can define separate <em>jobs</em> based on different images:</p>
<div class="gatsby-highlight" data-language="yml"><pre style="counter-reset: linenumber NaN" class="language-yml line-numbers"><code class="language-yml"><span class="token key atrule">stages</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> build<span class="token punctuation">-</span>stage 

<span class="token key atrule">build-backend</span><span class="token punctuation">:</span>
  <span class="token key atrule">stage</span><span class="token punctuation">:</span> build<span class="token punctuation">-</span>stage
  <span class="token key atrule">image</span><span class="token punctuation">:</span> mcr.microsoft.com/dotnet/core/sdk<span class="token punctuation">:</span>latest  <span class="token comment"># we can define an image per job</span>
  <span class="token key atrule">script</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> dotnet build
    
<span class="token key atrule">build-frontend</span><span class="token punctuation">:</span>
  <span class="token key atrule">stage</span><span class="token punctuation">:</span> build<span class="token punctuation">-</span>frontend
  <span class="token key atrule">image</span><span class="token punctuation">:</span> node<span class="token punctuation">:</span>12.6.0<span class="token punctuation">-</span>alpine <span class="token comment"># we can define an image per job</span>
  <span class="token key atrule">script</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> npm run build</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<h2>Create your own Docker image with custom tools</h2>
<p>Now, lets say that you want to extend your CI pipeline functionality to <a href="https://slack.com/intl/en-mx/help/articles/202009646-Notify-a-channel-or-workspace">notify a Slack channel</a> whenever the backend build is finished. For this, you could create a sample <code class="language-text">slack-notification.js</code> file that uses the Slack webhook API and that will be run with node. We won't go over the details for this here, but suppose your file calls:</p>
<div class="gatsby-highlight" data-language="javascript"><pre style="counter-reset: linenumber NaN" class="language-javascript line-numbers"><code class="language-javascript"><span class="token keyword">var</span> slack <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'slack-notify'</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token constant">SLACK_WEBHOOK_URL</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
slack<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">{</span> channel<span class="token operator">:</span> <span class="token string">'#my-channel'</span><span class="token punctuation">,</span> text<span class="token operator">:</span> <span class="token string">'Notifying from CI!'</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> </code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span></span></pre></div>
<p>However, we cannot call this after the <code class="language-text">dotnet build</code> script, since the <code class="language-text">mcr.microsoft.com/dotnet/core/sdk:latest</code> image does not include the node dependencies. Therefore, we would need to create a custom image, upload it to some container registry (such as <a href="https://azure.microsoft.com/en-us/services/container-registry/">Azure Container Registry</a>, or even GitLab) and use it as our base image. </p>
<div class="gatsby-highlight" data-language="dockerfile"><pre style="counter-reset: linenumber NaN" class="language-dockerfile line-numbers"><code class="language-dockerfile"><span class="token keyword">FROM</span> mcr.microsoft.com/dotnet/core/sdk<span class="token punctuation">:</span>latest
<span class="token keyword">RUN</span> curl <span class="token punctuation">-</span>sL https<span class="token punctuation">:</span>//deb.nodesource.com/setup_14.x <span class="token punctuation">|</span> bash &amp;&amp; \ <span class="token comment"># we install the node dependencies</span>
    apt<span class="token punctuation">-</span>get install <span class="token punctuation">-</span>y nodejs</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>
<p>Then inside our <code class="language-text">build-backend</code> job we could add the following to the scripts array:</p>
<div class="gatsby-highlight" data-language="yml"><pre style="counter-reset: linenumber NaN" class="language-yml line-numbers"><code class="language-yml"><span class="token key atrule">build-backend</span><span class="token punctuation">:</span>
  <span class="token key atrule">stage</span><span class="token punctuation">:</span> build<span class="token punctuation">-</span>stage
  <span class="token key atrule">image</span><span class="token punctuation">:</span> my<span class="token punctuation">-</span>custom<span class="token punctuation">-</span>image<span class="token punctuation">-</span>with<span class="token punctuation">-</span>net<span class="token punctuation">-</span>and<span class="token punctuation">-</span>node  <span class="token comment"># we can define an image per job</span>
  <span class="token key atrule">script</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> dotnet build
    <span class="token punctuation">-</span> node slack<span class="token punctuation">-</span>notify.js</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<h2>Create a Docker image inside a pipeline! 🤯</h2>
<p>Last but not least, it is also possible to use create a Docker image from the latest compiled code in the repository. This is useful in case another team is working in a project that depends on ours. This way, whenever they want to run our project without the need to set up their local environments and download any other dependencies, they can just pull the Docker image generated from the latest code in our repo. For that we can use <a href="https://docs.gitlab.com/ee/ci/docker/using_docker_build.html">Docker-in-Docker</a> </p>
<div class="gatsby-highlight" data-language="yml"><pre style="counter-reset: linenumber NaN" class="language-yml line-numbers"><code class="language-yml"><span class="token key atrule">deploy_app:docker</span><span class="token punctuation">:</span>
  <span class="token key atrule">stage</span><span class="token punctuation">:</span> deploy
  <span class="token key atrule">image</span><span class="token punctuation">:</span> docker<span class="token punctuation">:</span>dind    
  <span class="token key atrule">script</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> docker login <span class="token punctuation">-</span>u $CI_REGISTRY_USER <span class="token punctuation">-</span>p $CI_REGISTRY_PASSWORD $CI_REGISTRY
    <span class="token punctuation">-</span> docker build <span class="token punctuation">-</span>t $CI_REGISTRY_IMAGE<span class="token punctuation">:</span>latest .
    <span class="token punctuation">-</span> docker push $CI_REGISTRY_IMAGE<span class="token punctuation">:</span>latest</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<h1>Final thoughts</h1>
<p>Docker is a very powerful tool, both as a vital enabler for microservices, but also to supercharge our CI pipelines. The possibilities of Docker are almost endless since we can use it in very creative ways to build tools that accomodate to our specific project and organizational needs. If you wish to start learning <a href="https://www.docker.com/">Docker</a> I recommend you take a look at their webpage. Also if you wish to know more regarding pipelines, I suggest you refer to the <a href="https://docs.gitlab.com/ee/ci/pipelines/index.html">GitLab CI pipeline documentation</a></p></div></div></main><style data-emotion-css="1l4w6pd">.css-1l4w6pd{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;}</style><footer class="css-1l4w6pd e1gf3uqo2"><p>© <!-- -->2021<!-- -->, Built with<!-- --> </p><style data-emotion-css="o5uqvq">.css-o5uqvq{margin-left:5px;}</style><a href="https://www.gatsbyjs.org" class="css-o5uqvq e1gf3uqo1">Gatsby</a></footer></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/blog/docker-supercharge-continous-integration";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-7f1ec355261b605a652a.js"],"app":["/app-584f2fd746a75deb887d.js"],"component---src-pages-404-js":["/component---src-pages-404-js-95782c797f04ab9e5a87.js"],"component---src-pages-blog-js":["/component---src-pages-blog-js-9258f67fdc1369ccbda6.js"],"component---src-pages-index-js":["/component---src-pages-index-js-7030b49a2274386cc044.js"],"component---src-templates-blog-post-js":["/component---src-templates-blog-post-js-ef27a760d5c6c8a9ee6d.js"]};/*]]>*/</script><script src="/polyfill-7f1ec355261b605a652a.js" nomodule=""></script><script src="/webpack-runtime-f53e3220823d64be0602.js" async=""></script><script src="/framework-8e528b732ab2eaadb7b7.js" async=""></script><script src="/styles-e9d24b1846c7d6eb9685.js" async=""></script><script src="/commons-61fda48d05e98b595736.js" async=""></script><script src="/component---src-templates-blog-post-js-ef27a760d5c6c8a9ee6d.js" async=""></script><script src="/app-584f2fd746a75deb887d.js" async=""></script></body></html>