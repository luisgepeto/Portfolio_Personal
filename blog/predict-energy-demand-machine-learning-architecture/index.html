<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/styles.a0ae5858639910470020.css" id="gatsby-global-css">code[class*=language-],pre[class*=language-]{color:#c5c8c6;text-shadow:0 1px rgba(0,0,0,.3);font-family:Inconsolata,Monaco,Consolas,Courier New,Courier,monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto;border-radius:.3em}:not(pre)>code[class*=language-],pre[class*=language-]{background:#1d1f21}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#7c7c7c}.token.punctuation{color:#c5c8c6}.namespace{opacity:.7}.token.keyword,.token.property,.token.tag{color:#96cbfe}.token.class-name{color:#ffffb6;text-decoration:underline}.token.boolean,.token.constant{color:#9c9}.token.deleted,.token.symbol{color:#f92672}.token.number{color:#ff73fd}.token.attr-name,.token.builtin,.token.char,.token.inserted,.token.selector,.token.string{color:#a8ff60}.token.variable{color:#c6c5fe}.token.operator{color:#ededed}.token.entity{color:#ffffb6;cursor:help}.token.url{color:#96cbfe}.language-css .token.string,.style .token.string{color:#87c38a}.token.atrule,.token.attr-value{color:#f9ee98}.token.function{color:#dad085}.token.regex{color:#e9c062}.token.important{color:#fd971f}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}pre[class*=language-].line-numbers{position:relative;padding-left:3.8em;counter-reset:linenumber}pre[class*=language-].line-numbers>code{position:relative;white-space:inherit}.line-numbers .line-numbers-rows{position:absolute;pointer-events:none;top:0;font-size:100%;left:-3.8em;width:3em;letter-spacing:-1px;border-right:1px solid #999;-webkit-user-select:none;-ms-user-select:none;user-select:none}.line-numbers-rows>span{display:block;counter-increment:linenumber}.line-numbers-rows>span:before{content:counter(linenumber);color:#999;display:block;padding-right:.8em;text-align:right}@font-face{font-family:Nunito;font-style:normal;font-display:swap;font-weight:200;src:local("Nunito Extra Light "),local("Nunito-Extra Light"),url(/static/nunito-latin-200-2dbeb8d854e77c952cb636cb14a151c4.woff2) format("woff2"),url(/static/nunito-latin-200-e53a21a8bf1b97fb9900e8d5c5bfbc14.woff) format("woff")}@font-face{font-family:Nunito;font-style:italic;font-display:swap;font-weight:200;src:local("Nunito Extra Light italic"),local("Nunito-Extra Lightitalic"),url(/static/nunito-latin-200italic-bbdf1c37c56e1bfaf618b9a4ee46d508.woff2) format("woff2"),url(/static/nunito-latin-200italic-2bcb70df023a72cb0a5864c993d03bfc.woff) format("woff")}@font-face{font-family:Nunito;font-style:normal;font-display:swap;font-weight:300;src:local("Nunito Light "),local("Nunito-Light"),url(/static/nunito-latin-300-98aabf9aea1a55e2390109ad1efddce3.woff2) format("woff2"),url(/static/nunito-latin-300-97e0d2fc0422400a6e7be8f1b5e4949e.woff) format("woff")}@font-face{font-family:Nunito;font-style:italic;font-display:swap;font-weight:300;src:local("Nunito Light italic"),local("Nunito-Lightitalic"),url(/static/nunito-latin-300italic-ac71e7f9cd408dd512f6a6bbbd64eb51.woff2) format("woff2"),url(/static/nunito-latin-300italic-8646bd832f738c016b56b146af6fcd46.woff) format("woff")}@font-face{font-family:Nunito;font-style:normal;font-display:swap;font-weight:400;src:local("Nunito Regular "),local("Nunito-Regular"),url(/static/nunito-latin-400-508e414e3d3bc41666826fee46c7d881.woff2) format("woff2"),url(/static/nunito-latin-400-e5875b853d135f2a82ceae7ac537b6f4.woff) format("woff")}@font-face{font-family:Nunito;font-style:italic;font-display:swap;font-weight:400;src:local("Nunito Regular italic"),local("Nunito-Regularitalic"),url(/static/nunito-latin-400italic-28f555d9a5c83842f03988ed14f00ef5.woff2) format("woff2"),url(/static/nunito-latin-400italic-09ce3100c075ee04f293b9191c88f156.woff) format("woff")}@font-face{font-family:Nunito;font-style:normal;font-display:swap;font-weight:600;src:local("Nunito SemiBold "),local("Nunito-SemiBold"),url(/static/nunito-latin-600-8b8871e482a76d7e9327b02131564af7.woff2) format("woff2"),url(/static/nunito-latin-600-f894e279899f0cda9d06e32b78783399.woff) format("woff")}@font-face{font-family:Nunito;font-style:italic;font-display:swap;font-weight:600;src:local("Nunito SemiBold italic"),local("Nunito-SemiBolditalic"),url(/static/nunito-latin-600italic-9f930640316b0b9e8b088958d8f7aa5c.woff2) format("woff2"),url(/static/nunito-latin-600italic-9d150271cf30aefb8609dff4c9ece978.woff) format("woff")}@font-face{font-family:Nunito;font-style:normal;font-display:swap;font-weight:700;src:local("Nunito Bold "),local("Nunito-Bold"),url(/static/nunito-latin-700-a22acb48f45d03d672bf5b9389363a83.woff2) format("woff2"),url(/static/nunito-latin-700-7d90308f9bdf7321be5e28d017a5ade5.woff) format("woff")}@font-face{font-family:Nunito;font-style:italic;font-display:swap;font-weight:700;src:local("Nunito Bold italic"),local("Nunito-Bolditalic"),url(/static/nunito-latin-700italic-4507a1361620a66827e217855c9fff24.woff2) format("woff2"),url(/static/nunito-latin-700italic-26556875512fee1b823bc6117c076358.woff) format("woff")}@font-face{font-family:Nunito;font-style:normal;font-display:swap;font-weight:800;src:local("Nunito ExtraBold "),local("Nunito-ExtraBold"),url(/static/nunito-latin-800-eaa946756e91563b4b7d766de2f5b7ed.woff2) format("woff2"),url(/static/nunito-latin-800-5fa815a069b40c78f26863eaabcd6d2f.woff) format("woff")}@font-face{font-family:Nunito;font-style:italic;font-display:swap;font-weight:800;src:local("Nunito ExtraBold italic"),local("Nunito-ExtraBolditalic"),url(/static/nunito-latin-800italic-b9cd56a25c86d089cc18bc92dbad167a.woff2) format("woff2"),url(/static/nunito-latin-800italic-2e1a4979ec23066532d157ab5fe4ccc5.woff) format("woff")}@font-face{font-family:Nunito;font-style:normal;font-display:swap;font-weight:900;src:local("Nunito Black "),local("Nunito-Black"),url(/static/nunito-latin-900-f82c6fb49774f4e4caa570640e164320.woff2) format("woff2"),url(/static/nunito-latin-900-19de37363cebfe020de6d4abdbb38c2e.woff) format("woff")}@font-face{font-family:Nunito;font-style:italic;font-display:swap;font-weight:900;src:local("Nunito Black italic"),local("Nunito-Blackitalic"),url(/static/nunito-latin-900italic-6f10930c04eec040ac4ffb4890191149.woff2) format("woff2"),url(/static/nunito-latin-900italic-ca56cb53793f0f9084f26315012cefd8.woff) format("woff")}code{background-color:rgba(0,0,0,.04)}body{margin:0;font-family:Verdana,Helvetica,"sans-serif";-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}article,aside,details,figcaption,figure,footer,header,main,menu,nav,section,summary{display:block}audio,canvas,progress,video{display:inline-block}audio:not([controls]){display:none;height:0}progress{vertical-align:baseline}[hidden],template{display:none}a{font-style:normal;color:rgba(0,0,0,.8);-webkit-text-decoration-skip:objects}a:active,a:hover{outline-width:0}abbr[title]{border-bottom:none;text-decoration:underline;-webkit-text-decoration:underline dotted;text-decoration:underline dotted}b,strong{font-weight:inherit;font-weight:bolder}dfn{font-style:italic}h1{font-size:2em;margin:.67em 0}mark{background-color:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}svg:not(:root){overflow:hidden}code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em}figure{margin:1em 40px}hr{box-sizing:content-box;height:0;overflow:visible}button,input,optgroup,select,textarea{font:inherit;margin:0}optgroup{font-weight:700}button,input{overflow:visible}button,select{text-transform:none}[type=reset],[type=submit],button,html [type=button]{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-cancel-button,[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-input-placeholder{color:inherit;opacity:.54}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}html{font:112.5%/1.45em georgia,serif;box-sizing:border-box;overflow-y:scroll}*,:after,:before{box-sizing:inherit}body{color:rgba(0,0,0,.8);font-weight:400;word-wrap:break-word;font-kerning:normal;-ms-font-feature-settings:"kern","liga","clig","calt";-webkit-font-feature-settings:"kern","liga","clig","calt";font-feature-settings:"kern","liga","clig","calt"}img{max-width:100%;padding:0;margin:0 0 1.45rem}h1{font-size:2.25rem}h1,h2{padding:0;margin:0 0 1.45rem;color:inherit;font-weight:700;text-rendering:optimizeLegibility;line-height:1.1}h2{font-size:1.62671rem}h3{font-size:1.38316rem}h3,h4{padding:0;margin:0 0 1.45rem;color:inherit;font-weight:700;text-rendering:optimizeLegibility;line-height:1.1}h4{font-size:1rem}h5{font-size:.85028rem}h5,h6{padding:0;margin:0 0 1.45rem;color:inherit;font-weight:700;text-rendering:optimizeLegibility;line-height:1.1}h6{font-size:.78405rem}hgroup{padding:0;margin:0 0 1.45rem}ol,ul{padding:0;margin:0 0 1.45rem 1.45rem;list-style-position:outside;list-style-image:none}dd,dl,figure,p{padding:0;margin:0 0 1.45rem}pre{margin:0 0 1.45rem;font-size:.8rem;line-height:1.42;background:rgba(0,0,0,.04);border-radius:3px;overflow:auto;word-wrap:normal;padding:1.45rem}table{font-size:1rem;line-height:1.45rem;border-collapse:collapse;width:100%}fieldset,table{padding:0;margin:0 0 1.45rem}blockquote{padding:0;margin:0 1.45rem 1.45rem}form,iframe,noscript{padding:0;margin:0 0 1.45rem}hr{padding:0;margin:0 0 calc(1.45rem - 1px);background:rgba(0,0,0,.2);border:none;height:1px}address{padding:0;margin:0 0 1.45rem}b,dt,strong,th{font-weight:700}li{margin-bottom:.725rem}ol li,ul li{padding-left:0}li>ol,li>ul{margin-left:1.45rem;margin-bottom:.725rem;margin-top:.725rem}blockquote :last-child,li :last-child,p :last-child{margin-bottom:0}li>p{margin-bottom:.725rem}code,kbd,samp{font-size:.8rem;line-height:1.45rem}abbr,abbr[title],acronym{border-bottom:1px dotted rgba(0,0,0,.5);cursor:help}abbr[title]{text-decoration:none}td,th,thead{text-align:left}td,th{border-bottom:1px solid rgba(0,0,0,.12);font-feature-settings:"tnum";-moz-font-feature-settings:"tnum";-ms-font-feature-settings:"tnum";-webkit-font-feature-settings:"tnum";padding:.725rem .96667rem calc(.725rem - 1px)}td:first-child,th:first-child{padding-left:0}td:last-child,th:last-child{padding-right:0}code,tt{background-color:rgba(0,0,0,.04);border-radius:3px;font-family:SFMono-Regular,Consolas,Roboto Mono,Droid Sans Mono,Liberation Mono,Menlo,Courier,monospace;padding:.2em 0}pre code{background:none;line-height:1.42}code:after,code:before,tt:after,tt:before{letter-spacing:-.2em;content:" "}pre code:after,pre code:before,pre tt:after,pre tt:before{content:""}.gatsby-highlight{background-color:#1d1f21;border-radius:.3em;margin:.5em 0;padding:1em;overflow:auto}.gatsby-highlight pre[class*=language-].line-numbers{padding:0 0 0 2.8em;overflow:initial}@media only screen and (max-width:480px){html{font-size:100%}}</style><meta name="generator" content="Gatsby 2.32.13"/><title data-react-helmet="true">Predicting energy demand: A machine learning architecture | Luis Becerril</title><meta data-react-helmet="true" name="description" content="Machine Learning (ML) in the age of cloud computing has become ubiquitous. Many of the ML resources on the net go over the concepts of training, or theory…"/><meta data-react-helmet="true" property="og:title" content="Predicting energy demand: A machine learning architecture"/><meta data-react-helmet="true" property="og:description" content="Machine Learning (ML) in the age of cloud computing has become ubiquitous. Many of the ML resources on the net go over the concepts of training, or theory…"/><meta data-react-helmet="true" property="og:type" content="website"/><link rel="icon" href="/favicon-32x32.png?v=cf477734ab84c76ba024047fbb885545" type="image/png"/><link rel="manifest" href="/manifest.webmanifest" crossorigin="anonymous"/><meta name="theme-color" content="#126F72"/><link rel="apple-touch-icon" sizes="48x48" href="/icons/icon-48x48.png?v=cf477734ab84c76ba024047fbb885545"/><link rel="apple-touch-icon" sizes="72x72" href="/icons/icon-72x72.png?v=cf477734ab84c76ba024047fbb885545"/><link rel="apple-touch-icon" sizes="96x96" href="/icons/icon-96x96.png?v=cf477734ab84c76ba024047fbb885545"/><link rel="apple-touch-icon" sizes="144x144" href="/icons/icon-144x144.png?v=cf477734ab84c76ba024047fbb885545"/><link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192x192.png?v=cf477734ab84c76ba024047fbb885545"/><link rel="apple-touch-icon" sizes="256x256" href="/icons/icon-256x256.png?v=cf477734ab84c76ba024047fbb885545"/><link rel="apple-touch-icon" sizes="384x384" href="/icons/icon-384x384.png?v=cf477734ab84c76ba024047fbb885545"/><link rel="apple-touch-icon" sizes="512x512" href="/icons/icon-512x512.png?v=cf477734ab84c76ba024047fbb885545"/><link as="script" rel="preload" href="/webpack-runtime-f4f62810dd067db54c37.js"/><link as="script" rel="preload" href="/framework-8e528b732ab2eaadb7b7.js"/><link as="script" rel="preload" href="/app-86fb141b82fd7ee60bb3.js"/><link as="script" rel="preload" href="/styles-407fe62976dc5310c43e.js"/><link as="script" rel="preload" href="/commons-b5b72aef3d4b2d7b0449.js"/><link as="script" rel="preload" href="/component---src-templates-blog-post-js-978901fa00cd185fa850.js"/><link as="fetch" rel="preload" href="/page-data/blog/predict-energy-demand-machine-learning-architecture/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/3000541721.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/3649515864.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/app-data.json" crossorigin="anonymous"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><style data-emotion-css="1pyi7sa">.css-1pyi7sa{background:transparent;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-content:center;-ms-flex-line-pack:center;align-content:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;}</style><header class="css-1pyi7sa ey4lpck4"><style data-emotion-css="k1grrt">.css-k1grrt{max-width:860px;padding:1rem 1.0875rem;font-size:1.2rem;}</style><div class="css-k1grrt ey4lpck0"><p><style data-emotion-css="woz0q6">.css-woz0q6{-webkit-text-decoration:none;text-decoration:none;position:relative;margin-left:15px;margin-left:0;}.css-woz0q6::after{content:"";position:absolute;z-index:-1;top:70%;left:-0.1px;right:-0.1px;bottom:0;-webkit-transition:top 0.1s ease-in-out;transition:top 0.1s ease-in-out;background-color:rgba(18,111,114,0.8);}.css-woz0q6:hover::after{top:0;}</style><a class="css-woz0q6 ey4lpck3" href="/">Home</a><style data-emotion-css="1fe1gvl">.css-1fe1gvl{-webkit-text-decoration:none;text-decoration:none;position:relative;margin-left:15px;}.css-1fe1gvl::after{content:"";position:absolute;z-index:-1;top:70%;left:-0.1px;right:-0.1px;bottom:0;-webkit-transition:top 0.1s ease-in-out;transition:top 0.1s ease-in-out;background-color:rgba(18,111,114,0.8);}.css-1fe1gvl:hover::after{top:0;}</style><a class="css-1fe1gvl ey4lpck1" href="/blog">Blog</a><style data-emotion-css="6r6vxj">.css-6r6vxj{-webkit-text-decoration:none;text-decoration:none;position:relative;margin-left:15px;}.css-6r6vxj::after{content:"";position:absolute;z-index:-1;top:70%;left:-0.1px;right:-0.1px;bottom:0;-webkit-transition:top 0.1s ease-in-out;transition:top 0.1s ease-in-out;background-color:rgba(18,111,114,0.8);}.css-6r6vxj:hover::after{top:0;}</style><a href="https://www.linkedin.com/in/luis-becerril-09b26789" class="css-6r6vxj ey4lpck2">LinkedIn</a><a href="https://github.com/luisgepeto/" class="css-6r6vxj ey4lpck2">GitHub</a></p></div></header><style data-emotion-css="1813l62">.css-1813l62{margin:0 auto;max-width:860px;padding:0 1.0875rem 1rem;padding-top:0;}</style><div class="css-1813l62 e1gf3uqo0"><main><style data-emotion-css="hu0znc">.css-hu0znc{margin:0 auto;max-width:860px;padding:1.45rem 1.0875rem;}</style><div class="css-hu0znc eacr390"><style data-emotion-css="zj7ym0">.css-zj7ym0{display:inline;border-radius:1em 0 1em 0;background-image:linear-gradient( -100deg,rgba(18,111,114,0.15),rgba(18,111,114,0.8) 100%,rgba(18,111,114,0.25) );}</style><h1 class="css-zj7ym0 eacr391">Predicting energy demand: A machine learning architecture</h1><style data-emotion-css="wvcn4j">.css-wvcn4j{margin-top:10px;color:#606060;}</style><h3 class="css-wvcn4j eacr392">07 June, 2021<!-- --> - <!-- -->7 min read</h3><style data-emotion-css="34z1nk">.css-34z1nk a{-webkit-text-decoration:none;text-decoration:none;position:relative;}.css-34z1nk a::after{content:"";position:absolute;z-index:-1;top:70%;left:-0.1px;right:-0.1px;bottom:0;-webkit-transition:top 0.1s ease-in-out;transition:top 0.1s ease-in-out;background-color:rgba(18,111,114,0.8);}.css-34z1nk a:hover::after{top:0;}</style><div class="css-34z1nk eacr393"><p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 562px; "
    >
      <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 34.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAIAAACHqfpvAAAACXBIWXMAABJ0AAASdAHeZh94AAABVklEQVQY02NQ71kBRBo9K+Tal0q3LYFw1UAiqzR6VmqAubgQA4RS7lqeveFI3c7Tmj2r1LtXavauVOpYrty5SrVzjUb3WvXuNUAEZIDZEAQSAWkGKpVsXbTk3O3jD17KtCw36F8Xs3xv2OLdQQt3ec3dodQBNG6tWvdq1e5VKl2rgCQQqfesBiIGoMNUupfrTVi9//bTJ+8/20/fArTZZ/52jzlbPeZus5ux0XDiWv0JawwnrjOetM5k8jqTSeuAIpq9QM2rGIDWyrYvadx9bvX5uzOPXJ5x7Kpmz2qvudvcZ291nLnZfsYmoCmWUze4z9nqM2+H/fRNzjM3e83ZpjdhrWr3SpCzVbuXO8/e4jl3q9ucLR5zt2qAnLdCrWulWtcK1a6VKt0rVcFIBYK6gCECDMtVIJshAabQsRSIFDuXyXcshQQ+PEiBYa4OVqoBQ2ogP4MQAAcAzRZ2xelxAAAAAElFTkSuQmCC'); background-size: cover; display: block;"
  ></span>
  <picture>
          <source
              srcset="/static/5ce704f4f04a15bfee13264103ea3402/ba381/azure-ml-studio-logo.webp 200w,
/static/5ce704f4f04a15bfee13264103ea3402/7f61c/azure-ml-studio-logo.webp 400w,
/static/5ce704f4f04a15bfee13264103ea3402/49232/azure-ml-studio-logo.webp 562w"
              sizes="(max-width: 562px) 100vw, 562px"
              type="image/webp"
            />
          <source
            srcset="/static/5ce704f4f04a15bfee13264103ea3402/772e8/azure-ml-studio-logo.png 200w,
/static/5ce704f4f04a15bfee13264103ea3402/e17e5/azure-ml-studio-logo.png 400w,
/static/5ce704f4f04a15bfee13264103ea3402/6e88f/azure-ml-studio-logo.png 562w"
            sizes="(max-width: 562px) 100vw, 562px"
            type="image/png"
          />
          <img
            class="gatsby-resp-image-image"
            src="/static/5ce704f4f04a15bfee13264103ea3402/6e88f/azure-ml-studio-logo.png"
            alt="*Azure ML Studio* Logo"
            title="*Azure ML Studio* Logo"
            loading="lazy"
            decoding="async"
            style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
          />
        </picture>
    </span></p>
<p>Machine Learning (ML) in the age of cloud computing has become ubiquitous. Many of the ML resources on the net go over the concepts of training, or theory behind the algorithms. This is vital if you plan to create a succesfull ML model. </p>
<p>However, as engineers it is also crucial to put the results generated by our machine learning model at the hands of our users. For that we need a scalable and reliable architecture that can be reused across many products. This post will go over a sample custom architecture that might fit your needs.</p>
<h1>The requirement</h1>
<p>The purpose of this architecture is to create a product that enables the Operation and Maintenance (O&#x26;M) personnel of a manufacturing plant to know how the energy demand of a chilled water HVAC system will behave in the near future (~ 15 days). This will allow the team to plan operational changes that can result in energy savings.</p>
<p>After a brainstorming session with the stakeholders, the following requirements needed to be met by the architecture to fulfill the MVP:</p>
<ol>
<li><em>Predict the energy demand of a chilled water HVAC system at any point in the near future (15 days).</em></li>
<li>
<p><em>Present the predicted data to two types of stakeholders:</em></p>
<ul>
<li><strong><em>Business stakeholders</em></strong> <em>need to access the data in a user friendly format, i.e. Excel or Microsoft Power BI, to make decisions based on the predicted energy cost.</em></li>
<li><strong><em>Technical stakeholders</em></strong> <em>need to integrate the prediction to their proprietary systems, i.e. Building Management Systems (BMS), to make operational changes that can result in energy savings.</em></li>
</ul>
</li>
<li><em>Have the ability to improve the ML model as the independent variables on which the model was trained evolve through time.</em></li>
<li><em>Have the ability to extend the architecture to predict other O&#x26;M related data points as the product grows.</em></li>
</ol>
<h1>The architecture</h1>
<p>This is an overview of the proposed architecture. It will be hosted entirely in Azure. I will go over each of its components and their role, as well as give a brief description of why each of the Azure resources used was chosen.</p>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; "
    >
      <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 60.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAABJ0AAASdAHeZh94AAACHUlEQVQoz3VT2ZaaQBT0/z8gH5GXvOUxc7KNo0bFbURc2WRTQQFRlK6pZlxi5qSP99DSfevWvVVU8O8Sgj9x2Yp7yBdFAbFcwut0sGy14LTb2GsasN+X5/Je5SPeHQyX/e2MiTB0IM/h6TrSKAJWKwjfu935APg3qFw5Wcko5J/TqWR45nYThjjKe2kKEQQQWYpzmqDy3/Z2O4SjEea1GvSXFwSKApgmMoa+jUhUh8Z2ndkMYtBH7WcD1nPtHfDWnoyieC9gmAhWAea2AYXzUgkY8blZzDHNYqgE+lWvY6aNkTdq+PJjgO5T/bHl4hKyJazWcAc92Eofdv0PNkxOGg2chhr2Yw3bXg+ZquL0+gp4Hor1GmffRyXLMmQc9nGxgNvtwiETu9VEPhljr3ThPn9G2qsi7g7gtRrYdb+Xwux6fZxmU4CA4ni8i+IR1TMMxDwY6QECd4VDkiBpNxEO57DWVRiOCtMPoS9nWLpfkTMxPhzKJ5gvSOrRNrICaRt+AIsqrsm4IOOjOoQfxQj4fk81TRYeqwO4vBNTtHLajlMCXj1cKRVlNQlgctBKtYoOh3/gjLY08MKy0KGBdZ6HtMrvEQtbNDdBt+wkp9oyXzwASqXJUNh2yVS2AbLJGSnPEiZIoaLsiE/NBPY2gzbR0JtMsBuPyw5vgLj67mrqS5SLgJBFyOYwncKiH7WnbxSnhTMZH9hRIT89afgL4Bt+q4zzMBsybgAAAABJRU5ErkJggg=='); background-size: cover; display: block;"
  ></span>
  <picture>
          <source
              srcset="/static/fecd79cc92566818dc1a500eded9515c/ba381/ml-architecture-diagram.webp 200w,
/static/fecd79cc92566818dc1a500eded9515c/7f61c/ml-architecture-diagram.webp 400w,
/static/fecd79cc92566818dc1a500eded9515c/d00b9/ml-architecture-diagram.webp 800w,
/static/fecd79cc92566818dc1a500eded9515c/92f8c/ml-architecture-diagram.webp 1200w,
/static/fecd79cc92566818dc1a500eded9515c/58c45/ml-architecture-diagram.webp 1561w"
              sizes="(max-width: 800px) 100vw, 800px"
              type="image/webp"
            />
          <source
            srcset="/static/fecd79cc92566818dc1a500eded9515c/772e8/ml-architecture-diagram.png 200w,
/static/fecd79cc92566818dc1a500eded9515c/e17e5/ml-architecture-diagram.png 400w,
/static/fecd79cc92566818dc1a500eded9515c/5a190/ml-architecture-diagram.png 800w,
/static/fecd79cc92566818dc1a500eded9515c/c1b63/ml-architecture-diagram.png 1200w,
/static/fecd79cc92566818dc1a500eded9515c/2bcd1/ml-architecture-diagram.png 1561w"
            sizes="(max-width: 800px) 100vw, 800px"
            type="image/png"
          />
          <img
            class="gatsby-resp-image-image"
            src="/static/fecd79cc92566818dc1a500eded9515c/5a190/ml-architecture-diagram.png"
            alt="Diagram depicting ML architecture"
            title="Diagram depicting ML architecture"
            loading="lazy"
            decoding="async"
            style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
          />
        </picture>
    </span></p>
<h1>The components</h1>
<h2>ML Engine</h2>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 225px; "
    >
      <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 95%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAATCAIAAAAf7rriAAAACXBIWXMAABJ0AAASdAHeZh94AAAClUlEQVQ4y6VU30tTURy/L+FLBb33Ev0DSg8LEnw0fNC6tjYZw8ligpW+FUSIMMGwUdtYMRHZ3A/ZFjmjECmCEjJCyW0uY14VbSqN/bjbmG737pz77Zw7cRuzJz98uPfL95zPPd9f5zJQD0kGxpjYCCFin/ihAQycATViUSTc5bgdjuPW1wHjlaWl1MEBWSnk89lEgm4gEQkCpRxIVYzkUI1mM2swjNrtiUJhxGp9HQi8cDrH7Habz/dscnLYYskfHp5kURVLwSCMj+8MDq7pdCGt9o9s/Nbf+8yyL5ubOYMh2tf3jWVFoxGmp6FYrBGTY9vawGQCjwfcbvp0OMA3A2/9MOMFlwvcLur3eqm/tRVIXlUxyUephGyWRIMlCcm+WAG5t/K/sgJNSgJMj6CpQX8/hEL1YpaFZLJiI0Ekb9NClLk98WR2lfpKApTLtFQEvb0QDjeIeb7SU4RpPWxfNhit8+n7CLHLSDrOjkCnaxB3d+N0WpTLWJbFpq/bzP2gZXGbriN8ithPEAj4vd6AQuGbmlJrNOHIGln4Hs+df75ya3YrGNl/F96TeylV2lsVZwh4PpNI8J2dyc3NaCwmiaXNjHDZFlZ4uIyAr419bHoQWN5N04PR/8OW5JxzR+INT+zC+LLlw+qPEKe1fWIG/FdH5v/maG+lWjGWy49LJcyyKEU/nz0Sr1h/nusyNbUMMC0PL14fYm6OXhp6E8/Q2cKnn0z6zPOVu+NY3HhknhuemB+2Uz62zL1aoI2VKgXT6yESqRd3dEA8TuculwOxKAeIq0QC5POUpNsqVf2QEBBXVxdoNNDTI95Vle4oaykoVcRPqVZDezvs7dWLyfSkUpBOE+JUGiVTtcTJ4yW6R75YZ/0Z/AMjUcgcl3ScHwAAAABJRU5ErkJggg=='); background-size: cover; display: block;"
  ></span>
  <picture>
          <source
              srcset="/static/713e30ea54c3c4a509a10fce1d38b847/ba381/ml-architecture-ml-engine.webp 200w,
/static/713e30ea54c3c4a509a10fce1d38b847/d7e55/ml-architecture-ml-engine.webp 225w"
              sizes="(max-width: 225px) 100vw, 225px"
              type="image/webp"
            />
          <source
            srcset="/static/713e30ea54c3c4a509a10fce1d38b847/772e8/ml-architecture-ml-engine.png 200w,
/static/713e30ea54c3c4a509a10fce1d38b847/3684f/ml-architecture-ml-engine.png 225w"
            sizes="(max-width: 225px) 100vw, 225px"
            type="image/png"
          />
          <img
            class="gatsby-resp-image-image"
            src="/static/713e30ea54c3c4a509a10fce1d38b847/3684f/ml-architecture-ml-engine.png"
            alt="ML Engine"
            title="ML Engine"
            loading="lazy"
            decoding="async"
            style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
          />
        </picture>
    </span>
The ML Engine is the enabler of our architecture. <em>Azure ML Studio</em> was chosen to be used to create and train the models since it is a very powerful tool with a low barrier of entry which enables analytics through Jupyter notebooks and has a vast collection of ML algorithms to choose from.</p>
<p><em>Azure ML Studio</em> allows us to expose an API that will be consumed by the prediction workflows, and also enables to retrain and redeploy the model when needed. Therefore, it is possible to iterate and improve the prediction as the independent variables (weather data and space occupation) change over time. This helps to meet requirements <em>(1)</em> and <em>(3)</em>.</p>
<h2>Prediction trigger</h2>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 430px; "
    >
      <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 58.00000000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAABJ0AAASdAHeZh94AAACO0lEQVQoz02SbU/aUBTH+awmfoMtMTExvnC+8rUxMeKUvdqW+LRNqGBbWtCUlAcd0NIVSx9pS1sopdRCe3ZxmeHmn5Nzbs7v3nPOvRkASGG1xmHYVRTD9/vDoeq6muc58zlyTN83p9NJFL1nvq8MsGxaKgFN+dfX+O7uj48fbre2Sjs72PZ27eCgsr9/srmZ3djgjo6gWk0JAlCybaNT0iTJwN5eUn2ISDKm6CXDJAyT0vSSJBOKWtlyObq/X5DkgiBmhcLi8RGy2fTyclXCcpmBL7kJgBTERSlk7ISfvfZNU3Y9xXVlJMdRPQ9ZxfP6lqXPZtDtwu1tCKArSgZOT2YA1Eu7pXcYlWWVoTIYiL2ewHEvoogk8Pw/h2+3DdeF5+f44qIhCH94HsHZGKCmPY3Dbs957FqjwYt0VyziOE7TdKVSKRaLyKKwTBDGeAwcZ5+d/Zakt4Fls6vBpelKAFEU6breaDQQSVEUy7IIzufzCG41m3YQoLKd8/O2LL/Bp6cBgDGNOkbgzheqF+iqMhqNRFFEWLlcxjAMkbZtq+gh324ercPaPBHs6demydshamsoS6ZhDDVNlWVNlnVkFcUyDFWSdMeBTmcNzn12APIWqUdPJeuu7cemP5HHE8339SDQp9N3DVzXimMQhFEu9x/e//RaItyfVwF2E5Z+hTgFlUqK40sMW6wJhctCAX0BNKO1njkufahCsyVeXTOHR63jY+bwUPr+Der1lGGgVlvXaqded/r9Nsch+C9QaGZdyQ7l6gAAAABJRU5ErkJggg=='); background-size: cover; display: block;"
  ></span>
  <picture>
          <source
              srcset="/static/6bbca3c6f6635a9c4031bde10abb5104/ba381/ml-architecture-prediction-trigger.webp 200w,
/static/6bbca3c6f6635a9c4031bde10abb5104/7f61c/ml-architecture-prediction-trigger.webp 400w,
/static/6bbca3c6f6635a9c4031bde10abb5104/866c5/ml-architecture-prediction-trigger.webp 430w"
              sizes="(max-width: 430px) 100vw, 430px"
              type="image/webp"
            />
          <source
            srcset="/static/6bbca3c6f6635a9c4031bde10abb5104/772e8/ml-architecture-prediction-trigger.png 200w,
/static/6bbca3c6f6635a9c4031bde10abb5104/e17e5/ml-architecture-prediction-trigger.png 400w,
/static/6bbca3c6f6635a9c4031bde10abb5104/05ed2/ml-architecture-prediction-trigger.png 430w"
            sizes="(max-width: 430px) 100vw, 430px"
            type="image/png"
          />
          <img
            class="gatsby-resp-image-image"
            src="/static/6bbca3c6f6635a9c4031bde10abb5104/05ed2/ml-architecture-prediction-trigger.png"
            alt="Prediction trigger"
            title="Prediction trigger"
            loading="lazy"
            decoding="async"
            style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
          />
        </picture>
    </span>
A way of regulary triggering the prediction job is needed. The trigger can either be scheduled-based to keep the prediction updated, or any other business rule, e.g. whenever a user books a meeting room that will change the space occupation and therefore increase the AC load. </p>
<p>For this purpose, an <em>Azure Logic App</em> will be used for every data point. If the business rules to trigger the prediction are updated (or new ones are required), a new <em>Logic App</em> can be created very quickly through the <em>Azure Portal</em>. This helps to meet requirement <em>(4)</em>.</p>
<h2>Prediction processing</h2>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 614px; "
    >
      <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 77%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAIAAABr+ngCAAAACXBIWXMAABJ0AAASdAHeZh94AAACVElEQVQoz4VTS0/bQBD2z+u9/6OnnvsTeqyUFPdQVAQSIATkYSd2bJHUFSKNlLSlkODgJH4kdh4mMbbX3tmOE0BwQB2Nx7Oz882sx99yoKrs6Gh+cKDncgOeN7a2bnK5fj5v8DxGhl+/slIJJImhALCXwrFqlc3nT3sUICSE4uopJU1ZsfgKWFHYbIbhlJCZ615fXrYuLm513R2PIU0pIglhlcor4Fpt05lS6vu+bduTycR13fnmOJvOovgf8DotRdtut5MkYc+P/QjGBvBoH8CwPjY8hnRdx+11crYGLPRaZypJoePEFMKIxDFBub+/j9devH5FQZCWSlluGJ4XCl1Na4piR5IT3+egJocTtx8kTdO/ma1My7YtfDKx0HEcnCIVhAxcKNi7u8a3nc5nfrS3R/f3uaBUDBz3r293p622c/uz1ZZlqV6va5qmKMp3TRsZRlgoRKvV6uQEK2y3rE8/htkoqhL3i+cXgwEOiiRpGJOrq6tGo1Gr1QRBqFQqF81mv9frb28but77wl/3jffF3rudcy+mTJY4kKVw7HbvIm3g/RnPbGdsGEa93pBlGcfuet7EsqgoUpIwSTyfJm8/lt582BVGAaurGThyvO7CHM5bv23dGtkTxzaHQ1TbNC3T9BBcLm++mQll9EEoM6nKDg85qFaj6ZQwlgCgjQG8xSKiFJ1MGYuQrRt6EgLLJQsCQEUnjjmGlY6P4ewMFIUiVVW1lc8neBNUFSN4bQC5eXrK1hx88ZcBOIYc8P2NwmLBlst+p0ORc3d3D3EMPifcM/kHg/0tKMbLfmEAAAAASUVORK5CYII='); background-size: cover; display: block;"
  ></span>
  <picture>
          <source
              srcset="/static/6d1d789132c9368ddc41ca591ecb9e91/ba381/ml-architecture-prediction-processing.webp 200w,
/static/6d1d789132c9368ddc41ca591ecb9e91/7f61c/ml-architecture-prediction-processing.webp 400w,
/static/6d1d789132c9368ddc41ca591ecb9e91/5316f/ml-architecture-prediction-processing.webp 614w"
              sizes="(max-width: 614px) 100vw, 614px"
              type="image/webp"
            />
          <source
            srcset="/static/6d1d789132c9368ddc41ca591ecb9e91/772e8/ml-architecture-prediction-processing.png 200w,
/static/6d1d789132c9368ddc41ca591ecb9e91/e17e5/ml-architecture-prediction-processing.png 400w,
/static/6d1d789132c9368ddc41ca591ecb9e91/e9131/ml-architecture-prediction-processing.png 614w"
            sizes="(max-width: 614px) 100vw, 614px"
            type="image/png"
          />
          <img
            class="gatsby-resp-image-image"
            src="/static/6d1d789132c9368ddc41ca591ecb9e91/e9131/ml-architecture-prediction-processing.png"
            alt="Prediction processing"
            title="Prediction processing"
            loading="lazy"
            decoding="async"
            style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
          />
        </picture>
    </span>
The actual creation of a data point prediction happens through a request to the <em>Azure ML Studio</em> API. However, because each data point may require information on independent variables retrieved from other sources - such as the latest weather prediction, or calculating the space occupation - a way to easily coordinate dependencies is needed. A <em>Logic App</em> provides the best way to understand how a certain data point is predicted.</p>
<p>As more data point predictions are added to the product, we can add their corresponding triggers and prediction workflows as a new <em>Logic App</em>, meeting requirement <em>(4)</em>.</p>
<h2>Prediction caching</h2>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 793px; "
    >
      <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 58.00000000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAABJ0AAASdAHeZh94AAACHklEQVQoz12SbVPaQBDH+YrtB+kLP4z9Au1Mi9VhOjoKFkRSGSLyIAlgUEzIw+XuCAkNhDyQ3HUD6HS6sy/29u63/91NCvz0lDdbZvE4rpzyWj0pl7Pr6/XFhfHtu3t2ToolVq2yWo3X69bJSVyp8JsbiHmxyD2vwB1XTbaB8lGl/XnMdYearju10cxZr//88BbFlHPGMs65RUicJHxv4zGntKA/ysLrLJocPUyk/mjaf2j3u90XRUF0sabHm/nnLTzN0hw2jDgMeZYX4pKUw1uMV9tktTLXMQvDYLPZZFlqGIaFbMMe6paMCQmCIIctK47jg7Is57Cvqia2CcYYIc9b7q90XW827/p96f6+0+126XwOSdM0/4exLFPXm1Nqv1mapiCiaZqFLEV5UlWNUgpJqJi8z7yHkSQhSp8nE1EUBUFotVrQOSEkDEMAZuqrjaAUzGssFgugWJaxd9gaDAyMZUkajUbjnUVRhBBaLd0vPe/oHPlb7i+9ma5DEsT12UzH+ABHsMM03cZx8ubwZYL16mWqfvppf/hqta3Yd3C73W7c3lbK5bYoPqvqYdvccfIZGOP/GJwyzkTNLQ7mfhTR5RI5jkEIaFqwHd9nw+EOFgSuKHkbcN55OhikkrQQhI14xzotp9GIuj0my2z3hkkSgz/k6gpUCxwGIGTvDGJQ6HSapVKvXH4Sfj/+qnYuLzeaBnkGbyjNHYJdv38BdKWEEh3xAxUAAAAASUVORK5CYII='); background-size: cover; display: block;"
  ></span>
  <picture>
          <source
              srcset="/static/f6424319b29554b74aa90d8c830313e6/ba381/ml-architecture-prediction-caching.webp 200w,
/static/f6424319b29554b74aa90d8c830313e6/7f61c/ml-architecture-prediction-caching.webp 400w,
/static/f6424319b29554b74aa90d8c830313e6/51ddc/ml-architecture-prediction-caching.webp 793w"
              sizes="(max-width: 793px) 100vw, 793px"
              type="image/webp"
            />
          <source
            srcset="/static/f6424319b29554b74aa90d8c830313e6/772e8/ml-architecture-prediction-caching.png 200w,
/static/f6424319b29554b74aa90d8c830313e6/e17e5/ml-architecture-prediction-caching.png 400w,
/static/f6424319b29554b74aa90d8c830313e6/73fd0/ml-architecture-prediction-caching.png 793w"
            sizes="(max-width: 793px) 100vw, 793px"
            type="image/png"
          />
          <img
            class="gatsby-resp-image-image"
            src="/static/f6424319b29554b74aa90d8c830313e6/73fd0/ml-architecture-prediction-caching.png"
            alt="Prediction caching"
            title="Prediction caching"
            loading="lazy"
            decoding="async"
            style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
          />
        </picture>
    </span></p>
<p>The purpose behind having a caching component is multiple. It will allow to limit the number of calls to our ML API, its dependent services and to minimize the number of times that the <em>Azure Logic Apps</em> run.</p>
<p>Using an <em>Azure Function</em> alongside with <em>Azure Storage Tables</em> to persist the cached data helps to further decrease the cost while keeping the entire infrastructure functional and ready to respond to new requests instantaneously. Therefore, the most complex parts of the architecture only run when needed and not every time an external consumer requests the result of a prediction. </p>
<p>Another resource that is part of the prediction caching is the <em>Azure Key Vault</em>. Using a key vault to store secrets and configuration values has a lot of advantages that will be covered in future posts.</p>
<h2>Customer facing API</h2>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 393px; "
    >
      <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 87.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAIAAADUsmlHAAAACXBIWXMAABJ0AAASdAHeZh94AAACZElEQVQ4y42T7U/aUBTG/Zf96Be/GYKGzGRqeBGq6FyyLVuyEJeMMQwIDejeEiIUWuGW0gqt8mJt6cvt2WkR53RmPjlpTm/P757n3tu7AHNNHMf2vKnnmQAmpQ6OTKdTSnXXxdxy3f54PNR1rPTmyAIMhyAILs8fbm4erKy8DoXehMMY7yORwu4us7z8IRJ5FQrlksmXi4tHDAOyTFstCGZZgNVVSCRgf99lmJtYjDJJj0k5TMpMJLx0Gp84PtjY0ONxmk7D3h4cHMD6OsRiAYyk4/hmAjd9B37qcGHDfXszeX7NrKjvUwjTaJQahue6tmX/UsbfVR2/n/bGQ8MCist1qOO4tk2DhGICQNE5GkGYXVqqsmwh/zX57mNtbLd4Nfuty03sLNf7Ua2UyuxfKpfZkxP28BAp9vT01jZOY1l203TfpkovIl+OVKM3Me/Wcs/63Pb2drDmeBxs+25cs6igO/CUHqz5DsZDPW93znm+R0iHELHbfRbsBfD19XWz2RQEgYgiz/OdTsc0TeORfHowuAdbFmadtq9ut0sIkQOJIrb3hQkOSpLENRqG64KmPeyMRYqiqKqqaRrHcbVa7SwQJo1Go16vo6/62Rn+uaCq/4Cx22AwQMP5fP5zoEwm82kufC0dH/ulj2F0hfDV1VWlUslms3iouVyuUCiUy2WcC5NisXhSrVoPYdM/UrHdlghRJKkvyxe9nhIEJheyPEv6iiI0mwZ2+rNh0eisszoaSZeX8nCI3Z8KSdOc2W7fXoxwGLa2AO8axs7O/wPv1traHB6NgBAQRY+Q5wRW+vU3Nwj/BjWgsiCFgRfOAAAAAElFTkSuQmCC'); background-size: cover; display: block;"
  ></span>
  <picture>
          <source
              srcset="/static/54b391646c1a77e39c92aaef70edaa5e/ba381/ml-architecture-customer-facing-api.webp 200w,
/static/54b391646c1a77e39c92aaef70edaa5e/8efa6/ml-architecture-customer-facing-api.webp 393w"
              sizes="(max-width: 393px) 100vw, 393px"
              type="image/webp"
            />
          <source
            srcset="/static/54b391646c1a77e39c92aaef70edaa5e/772e8/ml-architecture-customer-facing-api.png 200w,
/static/54b391646c1a77e39c92aaef70edaa5e/d72ec/ml-architecture-customer-facing-api.png 393w"
            sizes="(max-width: 393px) 100vw, 393px"
            type="image/png"
          />
          <img
            class="gatsby-resp-image-image"
            src="/static/54b391646c1a77e39c92aaef70edaa5e/d72ec/ml-architecture-customer-facing-api.png"
            alt="Customer facing API"
            title="Customer facing API"
            loading="lazy"
            decoding="async"
            style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
          />
        </picture>
    </span>
All of the previous architecture components were inner-facing, meaning that they will only be interacting with each other within the infrastructure. In order to provide a way for our stakeholders to view the results of the energy demand prediction we can create custom HTTP endpoints. These endpoints can provide access control to determine whether a certain stakeholder has access to a specific prediction.</p>
<p>This can be achieved through the use of <em>Azure API Management</em>, which allows to bundle APIs into products and set up policies to our stakeholders such as usage quotas and user management.</p>
<p>The API can be consumed by most data manipulation software such as Excel or Power BI. Because it is also exposed as an HTTP endpoint, a request can be implemented on any webpage or called from within a proprietary BMS system, fulfilling requirement <em>(2)</em>.</p>
<h1>The implementation</h1>
<p>The resulting implementation of the architecture is depicted in the following diagram. Since the energy demand for the chilled water HVAC system depends on both the weather forecast data and the occupation schedule of the different meeting rooms, the APIs that expose this data need to be queried by the <em>Azure Logic App</em> that controlls the prediction processing for the data point. </p>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; "
    >
      <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 77%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAAA7DAAAOwwHHb6hkAAACWklEQVQ4y41U227TQBDND/MtfACvPCEkJMQTCKnqSyltVaXO1bHjW3xd2+u7mzjOYXZbhwQixEqjXe/lzMyZMx7hwjgcDpe2sdtuoes65nMN09kSWcaP9wcb/Qk0gPV9j/1+f7Sd+D708qxMblAkt8OrM6ejU/RTQMYYlsslVFWFZRlY+Rk0N0ZZNnCcO5rXEmpw2HXd3xEOY4hOXBLW05qlGfyI0aMeQRhT6iaWswlm0ylRsICmaXh+fsaoqioUWY46L5GmKXa7HfIsw1rXKDILpmnBczfQgxwLh6EqC4RhiCLP8PHBxMpl6Lvdbw55yvE4U3D9dAfXdVEWBXo6yJstkZ4hjhk45+DkNGIxoihCEARo2xbvrxfQ/fQlq1eqZMqflCu8+fz2mHJWl3iydTyOJ/h5dy953O+JI6Iiz3OEvg/HstFvG1mUw0lBJWBeZDAd4wi4JXkw4ivYEC91csavkIoVMjhUtKZppQ2FPALypsMmbYm/Leq6RtvUlDIQbr7ANq9guwls24RPkUVRig3REFec7jUE2JwDijR8xrEwXCRJjKIo5aWirOEFBvzQIxAm+bVsC2X8DVXhkci7i80wcj2PSj+RNiUJOI5zPFypGibKBOPxmKQxR1WVcOzvVH1VOhHFEio5bYrRIMxT7Ym1GCJFw1hDURQJmJIiVJVEvnrRnOQ/jc8j/FcviwiGtXCWJIksik+ySQIXXxUP7+7z8wgvtd4AIgBOMxD7Yo5pv2tr3C5dfPhhUGPw13f/EaHoHinsVxNOChI/5xnmUwXT8YP8AwmnYvwCwX17XLCaOLMAAAAASUVORK5CYII='); background-size: cover; display: block;"
  ></span>
  <picture>
          <source
              srcset="/static/d32d4350b3a5f4c82715a0f0c71120dc/ba381/ml-architecture-diagram-implementation.webp 200w,
/static/d32d4350b3a5f4c82715a0f0c71120dc/7f61c/ml-architecture-diagram-implementation.webp 400w,
/static/d32d4350b3a5f4c82715a0f0c71120dc/d00b9/ml-architecture-diagram-implementation.webp 800w,
/static/d32d4350b3a5f4c82715a0f0c71120dc/92f8c/ml-architecture-diagram-implementation.webp 1200w,
/static/d32d4350b3a5f4c82715a0f0c71120dc/41bb6/ml-architecture-diagram-implementation.webp 1222w"
              sizes="(max-width: 800px) 100vw, 800px"
              type="image/webp"
            />
          <source
            srcset="/static/d32d4350b3a5f4c82715a0f0c71120dc/772e8/ml-architecture-diagram-implementation.png 200w,
/static/d32d4350b3a5f4c82715a0f0c71120dc/e17e5/ml-architecture-diagram-implementation.png 400w,
/static/d32d4350b3a5f4c82715a0f0c71120dc/5a190/ml-architecture-diagram-implementation.png 800w,
/static/d32d4350b3a5f4c82715a0f0c71120dc/c1b63/ml-architecture-diagram-implementation.png 1200w,
/static/d32d4350b3a5f4c82715a0f0c71120dc/636d3/ml-architecture-diagram-implementation.png 1222w"
            sizes="(max-width: 800px) 100vw, 800px"
            type="image/png"
          />
          <img
            class="gatsby-resp-image-image"
            src="/static/d32d4350b3a5f4c82715a0f0c71120dc/5a190/ml-architecture-diagram-implementation.png"
            alt="Diagram with implemented ML architecture"
            title="Diagram with implemented ML architecture"
            loading="lazy"
            decoding="async"
            style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
          />
        </picture>
    </span></p>
<p>For this specific implementation, a report was generated in Excel where the API endpoint <code class="language-text">GET GetLatestPrediction</code> was called through VBA code and where the specific API key on our API product for the end user was passed as a Header. This the generated report for one of the test runs:</p>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; "
    >
      <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 73.00000000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAC+ElEQVQ4y01TS2tTQRS+/0Ra6kpcKj5XtVR3ClZFKG4sCCIi3QjiQqHQhS4EEYqCuNKlGzdFqaSvNI+bm9Q0rza3eefmcXPfN7k3yeeZadNm4ON8c+Y7Z87MnBEm559h6tFznHu8iOuLb3Bh4QXOrKzirDjAxbCFK1EHV0UHlwmXiF87tudDDia2LUyewMbElglh9uUSGOaXP+LJh8+Yf/sO098DmI07uC/peBg3MBfTcSei4jbhntjB3aiKW2EV02ENM1EDMxEdN4jfjFkQlr/9wNSDBTx9/wlKrYrk3h5KB/tIihFEtrcQC4ewK0YR2txE4M9vrK2uYuPvGmI7QaTjEmLBLSTCO4iHduBbBoQvP39h7tUSXq98RS6Txl4qBaXRgK4bqFSrnJfLFRimCU3XUVcUNJpN1Op18llc02i1cJDPw3YcCBgbnudxm6fFmCRBkuKQ4nEkdnchijGsr28gEAggGKSKEgkkCBLp4qQRRZFvKgyHQzCMD5kSptNpLmaWbZDJZJCgwHA4gmw2i1wuh2wmCykmIUWnSiaTsCzrNOF44na7zcGO1ul0OFdV9YTzNboKZpukYWulUgndbg/CYDAAAzDEiDP4vo9+vw+H7kXTNJ7MMAzuP1rzT/hIy+IEdm82lWq7PlU44BhPzIRMw4I8zz/1DwbHJxqdjooiK5h0kS1VQ6qgo9xgiT2eZDikHckyDr4JWQw4OkYXhbqFWsuGbnXR1lyougu360MwDB3NVocnPKyZXFglIROx5EOqpK1TEAWUGzZKisW1+aqJStPGftlArmTwWDbnFbLXYaV7fh+G7SFdNHhwUaEEjSMU6jZyZZNz5v+X1yHXLNI5VIADuUoVt92jR7FtG71eDx7B9z24bheVhslRVkyq1oZlu3SHPa5zaF0zHOjmqY+9sOX0jhrbdV3IsoxisXiMAgqFQ0KB2qFIP6XE+QhMw/3UKrJ8yOcsnrUP70O2w6ivWvSNWG+xOeeEkW/kH/Fxf72uwKSv+B8SQDkGCTFbCQAAAABJRU5ErkJggg=='); background-size: cover; display: block;"
  ></span>
  <picture>
          <source
              srcset="/static/bc036480413fccb8056dc6de7a13c4ad/ba381/ml-architecture-excel.webp 200w,
/static/bc036480413fccb8056dc6de7a13c4ad/7f61c/ml-architecture-excel.webp 400w,
/static/bc036480413fccb8056dc6de7a13c4ad/d00b9/ml-architecture-excel.webp 800w,
/static/bc036480413fccb8056dc6de7a13c4ad/97d4f/ml-architecture-excel.webp 827w"
              sizes="(max-width: 800px) 100vw, 800px"
              type="image/webp"
            />
          <source
            srcset="/static/bc036480413fccb8056dc6de7a13c4ad/772e8/ml-architecture-excel.png 200w,
/static/bc036480413fccb8056dc6de7a13c4ad/e17e5/ml-architecture-excel.png 400w,
/static/bc036480413fccb8056dc6de7a13c4ad/5a190/ml-architecture-excel.png 800w,
/static/bc036480413fccb8056dc6de7a13c4ad/4e6ec/ml-architecture-excel.png 827w"
            sizes="(max-width: 800px) 100vw, 800px"
            type="image/png"
          />
          <img
            class="gatsby-resp-image-image"
            src="/static/bc036480413fccb8056dc6de7a13c4ad/5a190/ml-architecture-excel.png"
            alt="Energy demand chart prediction"
            title="Energy demand chart prediction"
            loading="lazy"
            decoding="async"
            style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
          />
        </picture>
    </span></p>
<p>In case you wonder how the Azure ML training interface looks like, it is pretty simple (although the training process itself was fairly time consuming). </p>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; "
    >
      <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 124.50000000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAZCAIAAAC+dZmEAAAACXBIWXMAABJ0AAASdAHeZh94AAADtElEQVQ4y41UW28bRRT2vwJUBBI1jsnNTlM3wY2qIFpREIgnHvrOA2+8FIl3hHigiKrQW9JCFCe+YTvk5kuC68SpY+/u7GV21jt7cWO+2U3SQlPE0dnR7Ox85/KdczYSm0yNJmfGpmbiE6mRiemx5Exs/EJ88uLIJF5T8cSldyemX387dj6eSKXn0/PXXnvzfHQ0OTo1e+2zLyI3vlv4YWF1p16vrG9U1tahG5tbf1TWH2Vyv2Vyj5azWP/c2Nqu1uqNnXpjd3OrulWtVeuNaq0R+Sa/VznQhs8GeiCqqjLGuG3LkgTVVGL3+0dHz4bDI6zBBncHUGwiN+6UlmoHnNGnnY5KiCJLKlEMXSOyAMOWaZqUGhD9RDRNwznnPPLV41q+2R04nJrskOj7XQV6IKsHsqYa1GLMoKaGjcVsG0EIgTFFURzHiXy9vFtsyb5j65Q2O/Lazt7a7t52u7vd7h0qWp8xRadd1XAdIYPBwPM8ZppwLsDf5p4Un/Q83jcoxandtyCUmqHgBP6JLgKXJIlS6jg2SEHwAnxzpVlsST63jQARorDqBoUaBoVnDWZhmjHf9/iL4C8Xa7mmNHCOwafCTqzIutFRNKnXI4QgYZtbz8Ef/7S21Oi8DD41AbYIZbZlgWFk5HrOC+Bblcxf0pHnIEjzLMFxT6OqopiMgTCEDRNgG/jI9VuV3B4Z+m4IZgwq5DhwioQROWojgy3f97kjKJVlGYT/A4zrxECcIQ4WLFRIgA1hDK6Qs+PyM8HGcYaajlZDe4EhuMZrT9HQVrKioM9s/grPAb0sbKOwn1Cinqr3iGhIoqqe5wKMiM7wbDGzJWtEFa1LAj9wouKWrocMi0xEpRjAuPMSYWF5KQ1nANNwSDRJIWgX13WRcN+2cCHIyPw3+HmFTzhXKcMAYYcoUNvgUJAHW68En4qkiYGUehLCt7kdxnbcJP8BDqcCil8Cyi/YskEL+99g3ZA0AxRiNpjVR+jhpxPwj+VsSxkG7Sm6O3zEKnLuEr20s1+otQr1Vqn5dLN1iKKYwTyLP8kntzcLbX04HMC6jbr2uc64w/tBgUS6KM5+u40iux7m0QHlnutybg98P3Ll5s/fL2bLpfLvy6uZlWyuWF7Nl5aWV+7ef/jL3fv3Hiw+XHx8+86v9x4sFIolfC4Uy9l8MbOaL5YqkenLH74/f/2tWHL68tV4Mj12cW4kMfveVHoidWX0wlxy9oPo+KVYYjY+lZ67+ml0PDX/0edvvDN+Ljp5Lpr4Gz3FDyWwWOirAAAAAElFTkSuQmCC'); background-size: cover; display: block;"
  ></span>
  <picture>
          <source
              srcset="/static/3a8960fdf3ae7a3de9cda1d2ef84df10/ba381/azure-ml-studio-sample.webp 200w,
/static/3a8960fdf3ae7a3de9cda1d2ef84df10/7f61c/azure-ml-studio-sample.webp 400w,
/static/3a8960fdf3ae7a3de9cda1d2ef84df10/d00b9/azure-ml-studio-sample.webp 800w,
/static/3a8960fdf3ae7a3de9cda1d2ef84df10/5758c/azure-ml-studio-sample.webp 824w"
              sizes="(max-width: 800px) 100vw, 800px"
              type="image/webp"
            />
          <source
            srcset="/static/3a8960fdf3ae7a3de9cda1d2ef84df10/772e8/azure-ml-studio-sample.png 200w,
/static/3a8960fdf3ae7a3de9cda1d2ef84df10/e17e5/azure-ml-studio-sample.png 400w,
/static/3a8960fdf3ae7a3de9cda1d2ef84df10/5a190/azure-ml-studio-sample.png 800w,
/static/3a8960fdf3ae7a3de9cda1d2ef84df10/c1c45/azure-ml-studio-sample.png 824w"
            sizes="(max-width: 800px) 100vw, 800px"
            type="image/png"
          />
          <img
            class="gatsby-resp-image-image"
            src="/static/3a8960fdf3ae7a3de9cda1d2ef84df10/5a190/azure-ml-studio-sample.png"
            alt="Azure ML Studio Model in training"
            title="Azure ML Studio Model in training"
            loading="lazy"
            decoding="async"
            style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
          />
        </picture>
    </span></p>
<h1>Final thoughts and next steps</h1>
<p>Some of the next steps that are worth exploring are how the architecture can accomodate a retraining scenario. Currently the retraining would need to be done manually, however we could integrate this as part of a regular workflow since <em>Azure ML Studio</em> exposes an API for this purpose. This could also imply some considerations such as API versioning in case that we introduced breaking changes and needed to support older consumers. </p>
<p>Sadly enough, although this architecture did come to life as a proof of concept, it was never released as a full product due to technical limitations on the stakeholder side having to do with a lack of monitoring of the energy demand to continue moving forward with the ML model improvement.</p>
<h1>About the resources</h1>
<p>If you wish to learn more about the Azure resources used in this architecture, feel free to dive into their documentation:</p>
<h2><a href="https://studio.azureml.net/">Azure Machine Learning Studio (classic)</a></h2>
<h2><a href="https://azure.microsoft.com/en-us/services/logic-apps/">Azure Logic Apps</a></h2>
<h2><a href="https://azure.microsoft.com/en-us/services/api-management/">Azure API Management</a></h2>
<h2><a href="https://azure.microsoft.com/en-us/services/functions/">Azure Functions</a></h2>
<h2><a href="https://azure.microsoft.com/en-us/services/key-vault/">Azure Key Vault</a></h2>
<h2><a href="https://azure.microsoft.com/en-us/product-categories/storage/">Azure Storage</a></h2></div></div></main><style data-emotion-css="1l4w6pd">.css-1l4w6pd{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;}</style><footer class="css-1l4w6pd e1gf3uqo2"><p>© <!-- -->2021<!-- -->, Contact me: luis<!-- --> <!-- -->[@]<!-- --> <!-- -->becerril<!-- --> <!-- -->[.]<!-- --> <!-- -->engineer</p></footer></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/blog/predict-energy-demand-machine-learning-architecture";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-c38cd845a4181427323c.js"],"app":["/app-86fb141b82fd7ee60bb3.js"],"component---src-pages-404-js":["/component---src-pages-404-js-95782c797f04ab9e5a87.js"],"component---src-pages-blog-js":["/component---src-pages-blog-js-2ed379182379536cb30a.js"],"component---src-pages-index-js":["/component---src-pages-index-js-fedd251cc06733d105a3.js"],"component---src-templates-blog-post-js":["/component---src-templates-blog-post-js-978901fa00cd185fa850.js"]};/*]]>*/</script><script src="/polyfill-c38cd845a4181427323c.js" nomodule=""></script><script src="/component---src-templates-blog-post-js-978901fa00cd185fa850.js" async=""></script><script src="/commons-b5b72aef3d4b2d7b0449.js" async=""></script><script src="/styles-407fe62976dc5310c43e.js" async=""></script><script src="/app-86fb141b82fd7ee60bb3.js" async=""></script><script src="/framework-8e528b732ab2eaadb7b7.js" async=""></script><script src="/webpack-runtime-f4f62810dd067db54c37.js" async=""></script></body></html>